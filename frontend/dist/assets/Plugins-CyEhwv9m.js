import{r as b,o as h,h as c,b as y,f as l,k as w,d as o,w as d,g as n,i as _,j as u,y as v,z as C,A as k,e as V,s as $}from"./index-BZGgFshJ.js";import{s as z,a as r}from"./index-DsU-KCdk.js";import{s as B}from"./index-d-TqsKhq.js";import"./index-D5pn4_TF.js";import"./index-1NqfiXxy.js";import"./index-96xtCJkb.js";import"./index-DzdNdXKe.js";const N={class:"max-w-4xl mx-auto py-8"},R={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6"},G={__name:"Plugins",setup(S){const p=_(),i=b([]);h(m);async function m(){try{const t=await c.get("/plugins");i.value=t.data.map(e=>({...e,enabled:!!e.enabled,icon:e.icon||"pi pi-cog",iconColor:e.icon_color||"",settingsRoute:e.name==="whatsapp-meta"?"/plugins/whatsapp-meta":""}))}catch(t){console.error("Failed to load plugins",t)}}function g(t){p.push(t)}async function f(t){try{const a=(await c.put(`/plugins/${t.id}`,{enabled:t.enabled})).data,s=i.value.findIndex(x=>x.id===a.id);s!==-1&&(i.value[s].enabled=a.enabled)}catch(e){console.error("Failed to update plugin",e)}}return(t,e)=>(u(),y("div",N,[e[1]||(e[1]=l("h2",{class:"text-2xl font-bold mb-6 flex items-center gap-2"},[l("i",{class:"pi pi-plug text-primary-500 text-2xl"}),w(" Plugins ")],-1)),l("div",R,[e[0]||(e[0]=l("p",{class:"mb-4 text-surface-700 dark:text-surface-300"},"Manage and configure plugins for your application here.",-1)),o(n(z),{value:i.value,class:"p-datatable-sm",showGridlines:!1},{default:d(()=>[o(n(r),{field:"icon",header:"",style:{width:"60px"}},{body:d(a=>[l("i",{class:C(a.data.icon+" text-2xl"),style:v(a.data.iconColor?"color:"+a.data.iconColor:"")},null,6)]),_:1}),o(n(r),{field:"name",header:"Plugin"}),o(n(r),{field:"enabled",header:"Enabled",style:{width:"120px"}},{body:d(a=>[o(n(B),{modelValue:a.data.enabled,"onUpdate:modelValue":s=>a.data.enabled=s,onChange:s=>f(a.data)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),o(n(r),{header:"Settings",style:{width:"120px"}},{body:d(a=>[a.data.settingsRoute?(u(),k(n($),{key:0,icon:"pi pi-cog",label:"Settings",size:"small",onClick:s=>g(a.data.settingsRoute)},null,8,["onClick"])):V("",!0)]),_:1})]),_:1},8,["value"])])]))}};export{G as default};
