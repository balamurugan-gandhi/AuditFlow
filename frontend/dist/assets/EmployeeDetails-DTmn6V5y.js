import{r as f,c as S,o as j,b as u,f as e,e as B,d as a,g as t,i as F,s as $,q as v,v as b,t as o,w as g,h as A,p as V,j as n,A as P}from"./index-DPOBPCwE.js";import{s as _}from"./index-n7NHwDQH.js";import{s as R,a as x}from"./index-DUTilYh3.js";import{s as l}from"./index-CMlV24jF.js";import{s as E}from"./index-D0C5FUdV.js";import"./index-WcNS1M0s.js";import"./index-DtRZ5Itz.js";import"./index-Cqzmdddl.js";import"./index-CsP7fTzu.js";const M={class:"space-y-6"},I={class:"flex justify-end items-center"},L={key:0,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},q={class:"lg:col-span-2 space-y-6"},G={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6 border border-surface-200 dark:border-surface-700"},H={class:"flex justify-between items-start mb-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6 border border-surface-200 dark:border-surface-700"},T={class:"space-y-4"},U={class:"space-y-6"},W={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6 border border-surface-200 dark:border-surface-700"},z={class:"grid grid-cols-2 gap-4"},K={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Q={class:"lg:col-span-2 space-y-6"},X={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6 border border-surface-200 dark:border-surface-700"},Z={class:"flex justify-between items-start mb-6"},ee={class:"text-xl font-bold text-surface-900 dark:text-surface-0 m-0"},se={class:"text-surface-500 dark:text-surface-400 mt-1"},te={class:"flex gap-2"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"info-item"},de={class:"text-surface-900 dark:text-surface-0 font-medium"},oe={class:"info-item"},ie={class:"text-surface-900 dark:text-surface-0 font-medium"},le={class:"info-item"},ce={class:"text-surface-900 dark:text-surface-0 font-medium"},ne={class:"info-item"},ue={class:"text-surface-900 dark:text-surface-0 font-medium"},me={class:"info-item"},fe={class:"text-surface-900 dark:text-surface-0 font-medium"},xe={class:"info-item"},pe={class:"info-item md:col-span-2"},ve={class:"text-surface-900 dark:text-surface-0 font-medium"},be={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6 border border-surface-200 dark:border-surface-700"},ge={class:"flex justify-between items-center mb-4"},_e={class:"space-y-6"},he={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6 border border-surface-200 dark:border-surface-700"},ke={class:"grid grid-cols-2 gap-4"},ye={class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl text-center"},we={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},$e={class:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl text-center"},Ae={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},Ne={class:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl text-center"},Ye={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},De={class:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl text-center"},Ce={class:"text-2xl font-bold text-green-600 dark:text-green-400"},qe={__name:"EmployeeDetails",setup(Se){const h=V(),k=F(),d=f(null),y=f(!0),m=f({}),c=new Date().getFullYear(),N=f(["All Years",`${c}-${c+1}`,`${c-1}-${c}`,`${c-2}-${c-1}`]),p=f("All Years"),Y=S(()=>!d.value||!d.value.files?[]:p.value==="All Years"?d.value.files:d.value.files.filter(i=>i.assessment_year===p.value)),D=i=>({received:"secondary",assigned:"info","in-progress":"info","ready-to-file":"info",filed:"success",completed:"success"})[i]||"secondary",C=async()=>{try{const i=await A.get(`/employees/${h.params.id}`);d.value=i.data;const s=`${c}-${c+1}`,r=await A.get("/dashboard/stats",{params:{employee_id:h.params.id,assessment_year:s}});m.value=r.data}catch(i){console.error("Error fetching employee:",i)}finally{y.value=!1}},w=i=>i?new Date(i).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}):"N/A";return j(()=>{C()}),(i,s)=>(n(),u("div",M,[e("div",I,[a(t($),{label:"Back",icon:"pi pi-arrow-left",text:"",onClick:s[0]||(s[0]=r=>t(k).back())})]),y.value?(n(),u("div",L,[e("div",q,[e("div",G,[e("div",H,[e("div",null,[a(t(l),{width:"16rem",height:"2rem",class:"mb-2"}),a(t(l),{width:"8rem",height:"1rem"})]),a(t(l),{width:"6rem",height:"2rem",borderRadius:"16px"})]),e("div",J,[(n(),u(v,null,b(2,r=>e("div",{class:"info-item",key:r},[a(t(l),{width:"6rem",height:"1rem",class:"mb-2"}),a(t(l),{width:"100%",height:"1.5rem"})])),64))])]),e("div",O,[a(t(l),{width:"10rem",height:"1.5rem",class:"mb-4"}),e("div",T,[(n(),u(v,null,b(3,r=>a(t(l),{width:"100%",height:"3rem",key:r})),64))])])]),e("div",U,[e("div",W,[a(t(l),{width:"10rem",height:"1.5rem",class:"mb-4"}),e("div",z,[(n(),u(v,null,b(4,r=>a(t(l),{width:"100%",height:"5rem",key:r})),64))])])])])):d.value?(n(),u("div",K,[e("div",Q,[e("div",X,[e("div",Z,[e("div",null,[e("h3",ee,o(d.value.name),1),e("p",se,o(d.value.email),1)]),e("div",te,[(n(!0),u(v,null,b(d.value.roles,r=>(n(),P(t(_),{key:r.id,value:r.name,severity:"info"},null,8,["value"]))),128))])]),e("div",ae,[e("div",re,[s[2]||(s[2]=e("label",{class:"block text-sm font-medium text-surface-500 dark:text-surface-400 mb-1"},"Phone",-1)),e("div",de,o(d.value.phone||"N/A"),1)]),e("div",oe,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-surface-500 dark:text-surface-400 mb-1"},"WhatsApp",-1)),e("div",ie,o(d.value.whatsapp_number||"N/A"),1)]),e("div",le,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-surface-500 dark:text-surface-400 mb-1"},"Date of Birth",-1)),e("div",ce,o(w(d.value.dob)),1)]),e("div",ne,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-surface-500 dark:text-surface-400 mb-1"},"Gender",-1)),e("div",ue,o(d.value.gender||"N/A"),1)]),e("div",me,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-surface-500 dark:text-surface-400 mb-1"},"Joined Date",-1)),e("div",fe,o(w(d.value.doj)),1)]),e("div",xe,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium text-surface-500 dark:text-surface-400 mb-1"},"Status",-1)),a(t(_),{value:"Active",severity:"success"})]),e("div",pe,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-surface-500 dark:text-surface-400 mb-1"},"Address",-1)),e("div",ve,o(d.value.address||"N/A"),1)])])]),e("div",be,[e("div",ge,[s[9]||(s[9]=e("h3",{class:"text-lg font-bold text-surface-900 dark:text-surface-0 m-0"},"Assigned Files History",-1)),a(t(E),{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=r=>p.value=r),options:N.value,placeholder:"Select Year",class:"w-48"},null,8,["modelValue","options"])]),a(t(R),{value:Y.value,stripedRows:"",class:"p-datatable-sm",paginator:"",rows:5,rowsPerPageOptions:[5,10,20]},{empty:g(()=>[...s[10]||(s[10]=[e("div",{class:"text-center p-4"},"No files assigned to this employee.",-1)])]),default:g(()=>[a(t(x),{field:"client.business_name",header:"Client"}),a(t(x),{field:"file_type",header:"File Type"}),a(t(x),{field:"assessment_year",header:"Year"}),a(t(x),{field:"status",header:"Status"},{body:g(r=>[a(t(_),{value:r.data.status,severity:D(r.data.status)},null,8,["value","severity"])]),_:1}),a(t(x),{header:"Actions",style:{width:"4rem"}},{body:g(r=>[a(t($),{icon:"pi pi-eye",text:"",rounded:"",severity:"secondary",onClick:je=>t(k).push(`/files/${r.data.id}`)},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])]),e("div",_e,[e("div",he,[s[15]||(s[15]=e("h3",{class:"text-lg font-bold text-surface-900 dark:text-surface-0 mb-4"},"Performance Stats",-1)),e("div",ke,[e("div",ye,[e("div",we,o(m.value.total_files||0),1),s[11]||(s[11]=e("div",{class:"text-xs text-surface-500 dark:text-surface-400 mt-1"},"Assigned Files",-1))]),e("div",$e,[e("div",Ae,o(m.value.pending||0),1),s[12]||(s[12]=e("div",{class:"text-xs text-surface-500 dark:text-surface-400 mt-1"},"Pending",-1))]),e("div",Ne,[e("div",Ye,o(m.value.in_progress||0),1),s[13]||(s[13]=e("div",{class:"text-xs text-surface-500 dark:text-surface-400 mt-1"},"In Progress",-1))]),e("div",De,[e("div",Ce,o(m.value.completed||0),1),s[14]||(s[14]=e("div",{class:"text-xs text-surface-500 dark:text-surface-400 mt-1"},"Completed",-1))])])])])])):B("",!0)]))}};export{qe as default};
