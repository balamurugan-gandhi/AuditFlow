import{c as A,p as T,r as f,o as B,b as n,f as s,e as u,t as d,q as L,v as F,d as o,g as r,x as I,n as p,i as j,s as C,h as k,j as i}from"./index-CSrMWdAq.js";import{s as D}from"./index-B-d2rpup.js";import{s as P}from"./index-C0yZiWtw.js";import{s as b}from"./index-DIrNIlJG.js";import"./index-BWv2no9g.js";import"./index-L9OCDMB-.js";const M={class:"max-w-4xl mx-auto space-y-6"},Y={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6 border border-surface-200 dark:border-surface-700"},O={class:"text-2xl font-bold mb-6 text-surface-900 dark:text-surface-0"},R={key:0,class:"space-y-6"},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},z={class:"flex flex-col gap-2"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Q={class:"flex flex-col gap-2"},W={key:0,class:"text-red-500"},H={class:"flex flex-col gap-2"},J={key:0,class:"text-red-500"},K={class:"flex flex-col gap-2"},X={key:0,class:"text-red-500"},Z={class:"flex flex-col gap-2"},ee={key:0,class:"text-red-500"},le={class:"flex flex-col gap-2"},se={key:0,class:"text-red-500"},ae={class:"flex flex-col gap-2"},te={key:0,class:"text-red-500"},re={class:"flex flex-col gap-2"},ne={key:0,class:"text-red-500"},oe={class:"flex flex-col gap-2"},ie={key:0,class:"text-red-500"},ue={class:"flex flex-col gap-2"},de={key:0,class:"text-red-500"},me={class:"flex flex-col gap-2"},pe={key:0,class:"text-red-500"},ce={class:"flex flex-col gap-2"},ve={key:0,class:"text-red-500"},fe={class:"flex flex-col gap-2"},_e={key:0,class:"text-red-500"},xe={class:"flex flex-col gap-2 md:col-span-2 lg:col-span-3"},be={key:0,class:"text-red-500"},ge={class:"flex justify-end gap-3 pt-4 border-t border-surface-200 dark:border-surface-700"},ye={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"},he={key:1,class:"p-4 bg-red-50 text-red-700 rounded-lg border border-red-200"},$e={__name:"ClientForm",setup(ke){const g=j(),_=T(),x=A(()=>!!_.params.id),y=f(!1),h=f(!!_.params.id),N=["Proprietorship","Partnership","LLP","Private Limited","Public Limited","Trust","Society","Other"],$=["Monthly","Quarterly","Yearly"],l=f({}),c=f(""),t=f({business_name:"",contact_person:"",file_id:"",email:"",phone:"",alternate_phone:"",whatsapp_number:"",pan_number:"",gst_number:"",tin_number:"",business_type:"",filing_cycle:"Yearly",address:""}),E=async()=>{if(x.value){h.value=!0;try{const v=await k.get(`/clients/${_.params.id}`);t.value=v.data}catch(v){console.error("Error fetching client:",v),g.push("/clients")}finally{h.value=!1}}},S=async()=>{var v,e,a,V,w,U;y.value=!0,l.value={},c.value="";try{let m;x.value?m=await k.put(`/clients/${_.params.id}`,t.value):m=await k.post("/clients",t.value),g.push("/clients")}catch(m){if(console.error("API Error:",m),((v=m.response)==null?void 0:v.status)===422){l.value=m.response.data.errors||{};return}if(((e=m.response)==null?void 0:e.status)===500){c.value=`Internal server error. Please try again later. ${(V=(a=m.response)==null?void 0:a.data)==null?void 0:V.message}`;return}if(((w=m.response)==null?void 0:w.status)===403||((U=m.response)==null?void 0:U.status)===401){c.value="You are not authorized to perform this action.";return}if(!m.response){c.value="Network error â€” please check your internet connection.";return}c.value=m.response.data.message||"Unexpected error occurred."}finally{y.value=!1}};return B(()=>{E()}),(v,e)=>(i(),n("div",M,[s("div",Y,[s("h2",O,d(x.value?"Edit Client":"Add Client"),1),h.value?(i(),n("div",R,[s("div",q,[(i(),n(L,null,F(12,a=>s("div",{key:a,class:"flex flex-col gap-2"},[o(r(b),{width:"8rem",height:"1rem"}),o(r(b),{width:"100%",height:"2.5rem"})])),64))]),s("div",z,[o(r(b),{width:"5rem",height:"1rem"}),o(r(b),{width:"100%",height:"5rem"})])])):(i(),n("form",{key:1,onSubmit:I(S,["prevent"]),class:"space-y-6"},[s("div",G,[s("div",Q,[e[14]||(e[14]=s("label",{for:"business_name",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"Business Name *",-1)),o(r(p),{id:"business_name",modelValue:t.value.business_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.business_name=a),invalid:!!l.value.business_name},null,8,["modelValue","invalid"]),l.value.business_name?(i(),n("small",W,d(l.value.business_name[0]),1)):u("",!0)]),s("div",H,[e[15]||(e[15]=s("label",{for:"file_id",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"File ID",-1)),o(r(p),{id:"file_id",modelValue:t.value.file_id,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.file_id=a),invalid:!!l.value.file_id},null,8,["modelValue","invalid"]),l.value.file_id?(i(),n("small",J,d(l.value.file_id[0]),1)):u("",!0)]),s("div",K,[e[16]||(e[16]=s("label",{for:"contact_person",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"Contact Person",-1)),o(r(p),{id:"contact_person",modelValue:t.value.contact_person,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.contact_person=a),invalid:!!l.value.contact_person},null,8,["modelValue","invalid"]),l.value.contact_person?(i(),n("small",X,d(l.value.contact_person[0]),1)):u("",!0)]),s("div",Z,[e[17]||(e[17]=s("label",{for:"business_type",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"Business Type",-1)),o(r(P),{id:"business_type",modelValue:t.value.business_type,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.business_type=a),options:N,placeholder:"Select Type",invalid:!!l.value.business_type},null,8,["modelValue","invalid"]),l.value.business_type?(i(),n("small",ee,d(l.value.business_type[0]),1)):u("",!0)]),s("div",le,[e[18]||(e[18]=s("label",{for:"email",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"Email",-1)),o(r(p),{id:"email",modelValue:t.value.email,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.email=a),type:"email",invalid:!!l.value.email},null,8,["modelValue","invalid"]),l.value.email?(i(),n("small",se,d(l.value.email[0]),1)):u("",!0)]),s("div",ae,[e[19]||(e[19]=s("label",{for:"phone",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"Phone",-1)),o(r(p),{id:"phone",modelValue:t.value.phone,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.phone=a),invalid:!!l.value.phone},null,8,["modelValue","invalid"]),l.value.phone?(i(),n("small",te,d(l.value.phone[0]),1)):u("",!0)]),s("div",re,[e[20]||(e[20]=s("label",{for:"alternate_phone",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"Alternate Phone",-1)),o(r(p),{id:"alternate_phone",modelValue:t.value.alternate_phone,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.alternate_phone=a),invalid:!!l.value.alternate_phone},null,8,["modelValue","invalid"]),l.value.alternate_phone?(i(),n("small",ne,d(l.value.alternate_phone[0]),1)):u("",!0)]),s("div",oe,[e[21]||(e[21]=s("label",{for:"whatsapp_number",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"WhatsApp Number",-1)),o(r(p),{id:"whatsapp_number",modelValue:t.value.whatsapp_number,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.whatsapp_number=a),invalid:!!l.value.whatsapp_number},null,8,["modelValue","invalid"]),l.value.whatsapp_number?(i(),n("small",ie,d(l.value.whatsapp_number[0]),1)):u("",!0)]),s("div",ue,[e[22]||(e[22]=s("label",{for:"pan_number",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"PAN Number",-1)),o(r(p),{id:"pan_number",modelValue:t.value.pan_number,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.pan_number=a),class:"uppercase",invalid:!!l.value.pan_number},null,8,["modelValue","invalid"]),l.value.pan_number?(i(),n("small",de,d(l.value.pan_number[0]),1)):u("",!0)]),s("div",me,[e[23]||(e[23]=s("label",{for:"gst_number",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"GST Number",-1)),o(r(p),{id:"gst_number",modelValue:t.value.gst_number,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.gst_number=a),class:"uppercase",invalid:!!l.value.gst_number},null,8,["modelValue","invalid"]),l.value.gst_number?(i(),n("small",pe,d(l.value.gst_number[0]),1)):u("",!0)]),s("div",ce,[e[24]||(e[24]=s("label",{for:"tin_number",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"TIN Number",-1)),o(r(p),{id:"tin_number",modelValue:t.value.tin_number,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.tin_number=a),invalid:!!l.value.tin_number},null,8,["modelValue","invalid"]),l.value.tin_number?(i(),n("small",ve,d(l.value.tin_number[0]),1)):u("",!0)]),s("div",fe,[e[25]||(e[25]=s("label",{for:"filing_cycle",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"Filing Cycle",-1)),o(r(P),{id:"filing_cycle",modelValue:t.value.filing_cycle,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.filing_cycle=a),options:$,placeholder:"Select Cycle",invalid:!!l.value.filing_cycle},null,8,["modelValue","invalid"]),l.value.filing_cycle?(i(),n("small",_e,d(l.value.filing_cycle[0]),1)):u("",!0)]),s("div",xe,[e[26]||(e[26]=s("label",{for:"address",class:"text-sm font-medium text-surface-700 dark:text-surface-200"},"Address",-1)),o(r(D),{id:"address",modelValue:t.value.address,"onUpdate:modelValue":e[12]||(e[12]=a=>t.value.address=a),rows:"3",invalid:!!l.value.address},null,8,["modelValue","invalid"]),l.value.address?(i(),n("small",be,d(l.value.address[0]),1)):u("",!0)])]),s("div",ge,[o(r(C),{label:"Cancel",severity:"secondary",onClick:e[13]||(e[13]=a=>r(g).back())}),o(r(C),{type:"submit",label:x.value?"Update Client":"Create Client",loading:y.value},null,8,["label","loading"])])],32))]),c.value?(i(),n("div",ye,d(c.value),1)):u("",!0),Object.keys(l.value).length?(i(),n("div",he," Please fix the highlighted errors above. ")):u("",!0)]))}};export{$e as default};
