import{C as O,af as j,b as f,j as p,H as N,G as $,R as ht,E as mt,ag as et,ah as zt,Z as st,ai as Rt,aj as M,a4 as Et,ak as pt,l as gt,m as Z,e as C,f as a,A as F,ab as Q,al as xt,am as It,a0 as G,w as g,z as yt,q as P,ad as Kt,u as Ft,p as Ot,c as z,r as h,L as jt,o as Ut,d,g as i,k,t as m,i as Wt,s as _,h as B,v as q,n as Ht}from"./index-BZGgFshJ.js";import{s as bt}from"./index-CfJVsdKT.js";import{s as Mt}from"./index-CJ0R45mP.js";import{s as Gt}from"./index-DzdNdXKe.js";import{s as ft}from"./index-CMiJpnI6.js";import{s as qt}from"./index-96xtCJkb.js";import{s as vt}from"./index-DA80Fo-P.js";import{s as w}from"./index-DxVLTSHS.js";import{s as Zt,a as at}from"./index-DsU-KCdk.js";import{s as Qt}from"./index-C06LAcjJ.js";import"./index-D5pn4_TF.js";import"./index-1NqfiXxy.js";var Jt=`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
        overflow: hidden;
        background: dt('tabs.tablist.background');
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,Xt={root:function(t){var r=t.props;return["p-tabs p-component",{"p-tabs-scrollable":r.scrollable}]}},Yt=O.extend({name:"tabs",style:Jt,classes:Xt}),te={name:"BaseTabs",extends:j,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:Yt,provide:function(){return{$pcTabs:this,$parentInstance:this}}},kt={name:"Tabs",extends:te,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function ee(s,t,r,o,b,n){return p(),f("div",$({class:s.cx("root")},s.ptmi("root")),[N(s.$slots,"default")],16)}kt.render=ee;var ae={root:"p-tablist",content:"p-tablist-content p-tablist-viewport",tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},se=O.extend({name:"tablist",classes:ae}),ne={name:"BaseTabList",extends:j,props:{},style:se,provide:function(){return{$pcTabList:this,$parentInstance:this}}},wt={name:"TabList",extends:ne,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,r=this.getVisibleButtonWidths(),o=et(t)-r,b=Math.abs(t.scrollLeft),n=o*.8,l=b-n,x=Math.max(l,0);t.scrollLeft=pt(t)?-1*x:x},onNextButtonClick:function(){var t=this.$refs.content,r=this.getVisibleButtonWidths(),o=et(t)-r,b=Math.abs(t.scrollLeft),n=o*.8,l=b+n,x=t.scrollWidth-o,T=Math.min(l,x);t.scrollLeft=pt(t)?-1*T:T},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,r=t.content,o=t.inkbar,b=t.tabs;if(o){var n=st(r,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(o.style.height=Rt(n)+"px",o.style.top=M(n).top-M(b).top+"px"):(o.style.width=Et(n)+"px",o.style.left=M(n).left-M(b).left+"px")}},updateButtonState:function(){var t=this.$refs,r=t.list,o=t.content,b=o.scrollTop,n=o.scrollWidth,l=o.scrollHeight,x=o.offsetWidth,T=o.offsetHeight,S=Math.abs(o.scrollLeft),A=[et(o),zt(o)],R=A[0],E=A[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=b!==0,this.isNextButtonEnabled=r.offsetHeight>=T&&parseInt(b)!==l-E):(this.isPrevButtonEnabled=S!==0,this.isNextButtonEnabled=r.offsetWidth>=x&&parseInt(S)!==n-R)},getVisibleButtonWidths:function(){var t=this.$refs,r=t.prevButton,o=t.nextButton,b=0;return this.showNavigators&&(b=((r==null?void 0:r.offsetWidth)||0)+((o==null?void 0:o.offsetWidth)||0)),b}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return mt({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:Mt,ChevronRightIcon:Gt},directives:{ripple:ht}},re=["data-p"],ie=["aria-label","tabindex"],oe=["data-p"],le=["aria-orientation"],de=["aria-label","tabindex"];function ue(s,t,r,o,b,n){var l=gt("ripple");return p(),f("div",$({ref:"list",class:s.cx("root"),"data-p":n.dataP},s.ptmi("root")),[n.showNavigators&&b.isPrevButtonEnabled?Z((p(),f("button",$({key:0,ref:"prevButton",type:"button",class:s.cx("prevButton"),"aria-label":n.prevButtonAriaLabel,tabindex:n.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return n.onPrevButtonClick&&n.onPrevButtonClick.apply(n,arguments)})},s.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(p(),F(Q(n.templates.previcon||"ChevronLeftIcon"),$({"aria-hidden":"true"},s.ptm("prevIcon")),null,16))],16,ie)),[[l]]):C("",!0),a("div",$({ref:"content",class:s.cx("content"),onScroll:t[1]||(t[1]=function(){return n.onScroll&&n.onScroll.apply(n,arguments)}),"data-p":n.dataP},s.ptm("content")),[a("div",$({ref:"tabs",class:s.cx("tabList"),role:"tablist","aria-orientation":n.$pcTabs.orientation||"horizontal"},s.ptm("tabList")),[N(s.$slots,"default"),a("span",$({ref:"inkbar",class:s.cx("activeBar"),role:"presentation","aria-hidden":"true"},s.ptm("activeBar")),null,16)],16,le)],16,oe),n.showNavigators&&b.isNextButtonEnabled?Z((p(),f("button",$({key:1,ref:"nextButton",type:"button",class:s.cx("nextButton"),"aria-label":n.nextButtonAriaLabel,tabindex:n.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return n.onNextButtonClick&&n.onNextButtonClick.apply(n,arguments)})},s.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(p(),F(Q(n.templates.nexticon||"ChevronRightIcon"),$({"aria-hidden":"true"},s.ptm("nextIcon")),null,16))],16,de)),[[l]]):C("",!0)],16,re)}wt.render=ue;var ce={root:function(t){var r=t.instance,o=t.props;return["p-tab",{"p-tab-active":r.active,"p-disabled":o.disabled}]}},pe=O.extend({name:"tab",classes:ce}),be={name:"BaseTab",extends:j,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:pe,provide:function(){return{$pcTab:this,$parentInstance:this}}},nt={name:"Tab",extends:be,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var r=this.findNextTab(t.currentTarget);r?this.changeFocusedTab(t,r):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var r=this.findPrevTab(t.currentTarget);r?this.changeFocusedTab(t,r):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var r=this.findFirstTab();this.changeFocusedTab(t,r),t.preventDefault()},onEndKey:function(t){var r=this.findLastTab();this.changeFocusedTab(t,r),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue()},findNextTab:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=r?t:t.nextElementSibling;return o?G(o,"data-p-disabled")||G(o,"data-pc-section")==="activebar"?this.findNextTab(o):st(o,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=r?t:t.previousElementSibling;return o?G(o,"data-p-disabled")||G(o,"data-pc-section")==="activebar"?this.findPrevTab(o):st(o,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,r){It(r),this.scrollInView(r)},scrollInView:function(t){var r;t==null||(r=t.scrollIntoView)===null||r===void 0||r.call(t,{block:"nearest"})}},computed:{active:function(){var t;return xt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return $(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return mt({active:this.active})}},directives:{ripple:ht}};function fe(s,t,r,o,b,n){var l=gt("ripple");return s.asChild?N(s.$slots,"default",{key:1,dataP:n.dataP,class:yt(s.cx("root")),active:n.active,a11yAttrs:n.a11yAttrs,onClick:n.onClick}):Z((p(),F(Q(s.as),$({key:0,class:s.cx("root"),"data-p":n.dataP,onClick:n.onClick},n.attrs),{default:g(function(){return[N(s.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[l]])}nt.render=fe;var ve={root:"p-tabpanels"},he=O.extend({name:"tabpanels",classes:ve}),me={name:"BaseTabPanels",extends:j,props:{},style:he,provide:function(){return{$pcTabPanels:this,$parentInstance:this}}},$t={name:"TabPanels",extends:me,inheritAttrs:!1};function ge(s,t,r,o,b,n){return p(),f("div",$({class:s.cx("root"),role:"presentation"},s.ptmi("root")),[N(s.$slots,"default")],16)}$t.render=ge;var xe={root:function(t){var r=t.instance;return["p-tabpanel",{"p-tabpanel-active":r.active}]}},ye=O.extend({name:"tabpanel",classes:xe}),ke={name:"BaseTabPanel",extends:j,props:{value:{type:[String,Number],default:void 0},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1},header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:ye,provide:function(){return{$pcTabPanel:this,$parentInstance:this}}},rt={name:"TabPanel",extends:ke,inheritAttrs:!1,inject:["$pcTabs"],computed:{active:function(){var t;return xt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},ariaLabelledby:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},attrs:function(){return $(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){var t;return{id:this.id,tabindex:(t=this.$pcTabs)===null||t===void 0?void 0:t.tabindex,role:"tabpanel","aria-labelledby":this.ariaLabelledby,"data-pc-name":"tabpanel","data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function we(s,t,r,o,b,n){var l,x;return n.$pcTabs?(p(),f(P,{key:1},[s.asChild?N(s.$slots,"default",{key:1,class:yt(s.cx("root")),active:n.active,a11yAttrs:n.a11yAttrs}):(p(),f(P,{key:0},[!((l=n.$pcTabs)!==null&&l!==void 0&&l.lazy)||n.active?Z((p(),F(Q(s.as),$({key:0,class:s.cx("root")},n.attrs),{default:g(function(){return[N(s.$slots,"default")]}),_:3},16,["class"])),[[Kt,(x=n.$pcTabs)!==null&&x!==void 0&&x.lazy?!0:n.active]]):C("",!0)],64))],64)):N(s.$slots,"default",{key:0})}rt.render=we;const $e={class:"space-y-6"},Te={key:0,class:"space-y-6"},_e={class:"flex items-center gap-4"},Be={class:"flex-1"},Ce={class:"grid grid-cols-1 lg:grid-cols-12 gap-6"},Le={class:"lg:col-span-9 space-y-6"},Ne={class:"lg:col-span-3 space-y-6"},Se={key:1,class:"space-y-6 animate-fade-in"},De={key:0,class:"flex items-center gap-3 bg-red-50 border border-red-200 rounded-lg px-4 py-2 mb-2"},Pe={class:"text-red-700 font-semibold"},Ae={key:0},Ve={key:1,class:"flex items-center gap-3 bg-orange-50 border border-orange-200 rounded-lg px-4 py-2 mb-2"},ze={class:"text-orange-700 font-semibold"},Re={key:0},Ee={class:"flex items-center gap-4"},Ie={class:"text-2xl font-bold text-surface-900 dark:text-surface-0 flex items-center gap-3"},Ke={class:"text-surface-500 dark:text-surface-400 mt-1 flex items-center gap-2"},Fe={class:"ml-auto flex gap-2"},Oe={class:"grid grid-cols-1 lg:grid-cols-12 gap-6"},je={class:"lg:col-span-9 space-y-6"},Ue={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm border border-surface-100 dark:border-surface-700 overflow-hidden"},We={class:"flex justify-between items-center mb-6"},He={key:0,class:"space-y-4"},Me={class:"bg-surface-50 dark:bg-surface-900 p-4 rounded-lg space-y-3"},Ge={class:"flex justify-between items-start"},qe={key:1,class:"space-y-4"},Ze={class:"bg-surface-50 dark:bg-surface-900 p-4 rounded-lg"},Qe={class:"flex justify-between items-start mb-2"},Je={class:"font-medium text-surface-900 dark:text-surface-0"},Xe={class:"text-xs text-surface-500"},Ye={class:"text-surface-600 dark:text-surface-300 text-sm mb-2"},ta={key:0,class:"text-center py-12"},ea={class:"flex justify-between items-center mb-6"},aa={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},sa={class:"flex items-start gap-3"},na={class:"flex-1 space-y-2"},ra={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ia={class:"flex items-start gap-3"},oa={class:"flex-1 min-w-0"},la={class:"font-medium text-surface-900 dark:text-surface-0 truncate mb-1"},da={class:"text-xs text-surface-500 dark:text-surface-400"},ua={class:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},ca={key:0,class:"col-span-full text-center py-12"},pa={class:"card bg-white dark:bg-surface-800 p-6 rounded-xl shadow-sm border border-surface-100 dark:border-surface-700 mt-6"},ba={class:"flex justify-end"},fa={class:"flex flex-col gap-6 py-2 px-2"},va={class:"flex justify-end gap-3 pt-2"},ha={class:"lg:col-span-3 space-y-6"},ma={class:"card bg-white dark:bg-surface-800 p-6 rounded-xl shadow-sm border border-surface-100 dark:border-surface-700"},ga={class:"space-y-6"},xa={class:"flex items-start gap-3"},ya={class:"text-surface-900 dark:text-surface-0 font-medium"},ka={class:"flex items-start gap-3"},wa={class:"text-surface-900 dark:text-surface-0 text-sm leading-relaxed"},$a={class:"flex items-start gap-3"},Ta={class:"text-surface-900 dark:text-surface-0 text-sm"},_a={class:"flex items-start gap-3"},Ba={class:"text-surface-900 dark:text-surface-0 text-sm"},Ca={class:"flex items-start gap-3"},La={class:"text-surface-900 dark:text-surface-0 text-sm"},Na={class:"space-y-4"},Sa={class:"flex flex-col gap-2"},Da={class:"flex flex-col gap-2"},Pa={class:"flex flex-col gap-2"},Ha={__name:"FileDetails",setup(s){const t=Ot(),r=Wt(),o=Ft(),b=t.params.id,n=z(()=>{var u,e;return(e=(u=o.user)==null?void 0:u.roles)==null?void 0:e.some(v=>["admin","manager"].includes(v.name))}),l=h(null),x=h([]),T=h([]),S=h(!0),A=h(!1),R=h(!1),E=h(!1),J=h({}),X=h({}),I=h(!1),Y=h(!1),L=h({date:new Date().toISOString().split("T")[0],hours_worked:1,description:""}),D=z(()=>{var v;if(!((v=l.value)!=null&&v.estimated_completion_date))return null;const u=new Date(l.value.estimated_completion_date);if(isNaN(u.getTime()))return null;const e=new Date;return e.setHours(0,0,0,0),u.setHours(0,0,0,0),Math.floor((u-e)/(1e3*60*60*24))}),it=z(()=>!l.value||l.value.status==="completed"||l.value.payment_id?!1:D.value!==null&&D.value<0),ot=z(()=>it.value?Math.abs(D.value):0),lt=z(()=>!l.value||l.value.status==="completed"||l.value.payment_id?!1:D.value!==null&&D.value>=0&&D.value<=5),dt=z(()=>lt.value?D.value:0),ut=h(null),Tt=async()=>{try{const[u,e,v]=await Promise.all([B.get(`/files/${b}`),B.get(`/files/${b}/logs`),B.get(`/files/${b}/documents`)]);l.value=u.data,x.value=e.data||[],T.value=v.data||[]}catch(u){console.error("Error fetching data:",u)}finally{S.value=!1}},_t=async()=>{Y.value=!0;try{await B.post(`/files/${b}/worklogs`,L.value),I.value=!1,L.value={date:new Date().toISOString().split("T")[0],hours_worked:1,description:""},A.value=!0;const u=await B.get(`/files/${b}/logs`);x.value=u.data||[],A.value=!1}catch(u){console.error("Error saving log:",u)}finally{Y.value=!1}},Bt=()=>{ut.value.click()},Ct=async u=>{const e=u.target.files[0];if(!e)return;const v=new FormData;v.append("file",e),v.append("type",e.name.split(".").pop()||"unknown"),E.value=!0;try{await B.post(`/files/${b}/documents`,v,{headers:{"Content-Type":"multipart/form-data"}}),R.value=!0;const y=await B.get(`/files/${b}/documents`);T.value=y.data,R.value=!1}catch(y){console.error("Error uploading file:",y)}finally{E.value=!1,u.target.value=""}},Lt=async u=>{if(Vt("Delete this document?")){X.value[u.id]=!0;try{await B.delete(`/documents/${u.id}`),T.value=T.value.filter(e=>e.id!==u.id)}catch(e){console.error("Error deleting document:",e)}finally{delete X.value[u.id]}}},Nt=async u=>{J.value[u.id]=!0;try{const e=await B.get(`/documents/${u.id}/download`,{responseType:"blob"}),v=window.URL.createObjectURL(new Blob([e.data])),y=document.createElement("a");y.href=v,y.setAttribute("download",u.original_name),document.body.appendChild(y),y.click(),y.remove(),window.URL.revokeObjectURL(v)}catch(e){console.error("Error downloading document:",e),alert("Failed to download document")}finally{delete J.value[u.id]}},St=u=>{switch(u){case"completed":return"success";case"filed":return"success";case"ready-to-file":return"info";case"in-progress":return"info";case"assigned":return"secondary";case"received":return"secondary";default:return"secondary"}},U=u=>u?new Date(u).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",Dt=u=>{if(u===0)return"0 B";const e=1024,v=["B","KB","MB","GB"],y=Math.floor(Math.log(u)/Math.log(e));return parseFloat((u/Math.pow(e,y)).toFixed(2))+" "+v[y]},tt=h([]),V=h(!1),K=h(!1),W=h({reason:""}),ct=async()=>{var u,e;if(!(!((u=l.value)!=null&&u.client_id)||!((e=l.value)!=null&&e.assessment_year))){V.value=!0;try{const v=await B.get(`/clients/${l.value.client_id}/notes`,{params:{assessment_year:l.value.assessment_year}});tt.value=v.data||[]}catch{tt.value=[]}finally{V.value=!1}}},Pt=()=>{W.value={reason:""},K.value=!0},At=async()=>{var u,e;if(!(!((u=l.value)!=null&&u.client_id)||!((e=l.value)!=null&&e.assessment_year))){V.value=!0;try{await B.post(`/clients/${l.value.client_id}/notes`,{...W.value,assessment_year:l.value.assessment_year}),K.value=!1,await ct()}catch{}finally{V.value=!1}}},Vt=jt();return Ut(()=>{Tt().then(()=>{ct()})}),(u,e)=>{var v,y;return p(),f(P,null,[d(i(Qt)),a("div",$e,[S.value?(p(),f("div",Te,[a("div",_e,[d(i(w),{shape:"circle",size:"3rem"}),a("div",Be,[d(i(w),{width:"10rem",height:"2rem",class:"mb-2"}),d(i(w),{width:"15rem",height:"1rem"})]),d(i(w),{width:"6rem",height:"2rem"})]),a("div",Ce,[a("div",Le,[d(i(w),{width:"100%",height:"30rem",borderRadius:"12px"})]),a("div",Ne,[d(i(w),{width:"100%",height:"20rem",borderRadius:"12px"})])])])):l.value?(p(),f("div",Se,[it.value?(p(),f("div",De,[e[14]||(e[14]=a("i",{class:"pi pi-exclamation-triangle text-red-600 text-xl"},null,-1)),a("span",Pe,[e[11]||(e[11]=k(" This file is ",-1)),e[12]||(e[12]=a("b",null,"past due",-1)),k("! Estimated completion was "+m(ot.value)+" day",1),ot.value!==1?(p(),f("span",Ae,"s")):C("",!0),e[13]||(e[13]=k(" ago. ",-1))])])):lt.value?(p(),f("div",Ve,[e[18]||(e[18]=a("i",{class:"pi pi-clock text-orange-600 text-xl"},null,-1)),a("span",ze,[e[15]||(e[15]=k(" This file is due in ",-1)),a("b",null,m(dt.value),1),e[16]||(e[16]=k(" day",-1)),dt.value!==1?(p(),f("span",Re,"s")):C("",!0),e[17]||(e[17]=k(". ",-1))])])):C("",!0),a("div",Ee,[d(i(_),{icon:"pi pi-arrow-left",text:"",rounded:"",onClick:e[0]||(e[0]=c=>i(r).back())}),a("div",null,[a("h1",Ie,[k(m(l.value.file_type)+" ",1),d(i(bt),{value:l.value.status,severity:St(l.value.status),class:"text-sm px-2 py-1"},null,8,["value","severity"])]),a("p",Ke,[e[19]||(e[19]=a("i",{class:"pi pi-building"},null,-1)),k(" "+m((v=l.value.client)==null?void 0:v.business_name)+" ",1),e[20]||(e[20]=a("span",{class:"text-surface-300 dark:text-surface-600"},"|",-1)),e[21]||(e[21]=a("i",{class:"pi pi-calendar"},null,-1)),k(" "+m(l.value.assessment_year),1)])]),a("div",Fe,[n.value?(p(),F(i(_),{key:0,label:"Edit",icon:"pi pi-pencil",severity:"secondary",outlined:"",onClick:e[1]||(e[1]=c=>i(r).push(`/files/${l.value.id}/edit`))})):C("",!0)])]),a("div",Oe,[a("div",je,[a("div",Ue,[d(i(kt),{value:"0"},{default:g(()=>[d(i(wt),{class:"px-4 pt-2"},{default:g(()=>[d(i(nt),{value:"0"},{default:g(()=>[...e[22]||(e[22]=[k("Work Logs",-1)])]),_:1}),d(i(nt),{value:"1"},{default:g(()=>[...e[23]||(e[23]=[k("Documents",-1)])]),_:1})]),_:1}),d(i($t),{class:"p-6"},{default:g(()=>[d(i(rt),{value:"0"},{default:g(()=>[a("div",We,[e[24]||(e[24]=a("h3",{class:"text-lg font-semibold m-0"},"Work History",-1)),d(i(_),{label:"Log Work",icon:"pi pi-plus",size:"small",onClick:e[2]||(e[2]=c=>I.value=!0)})]),S.value||A.value?(p(),f("div",He,[(p(),f(P,null,q(3,c=>a("div",{key:"skeleton-log-"+c,class:"relative pl-6 border-l-2 border-surface-200 dark:border-surface-700 pb-6"},[e[25]||(e[25]=a("div",{class:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-surface-200 dark:bg-surface-700"},null,-1)),a("div",Me,[a("div",Ge,[d(i(w),{width:"8rem",height:"1rem"}),d(i(w),{width:"5rem",height:"0.75rem"})]),d(i(w),{width:"100%",height:"0.875rem"}),d(i(w),{width:"70%",height:"0.875rem"}),d(i(w),{width:"4rem",height:"1.5rem",borderRadius:"0.375rem"})])])),64))])):(p(),f("div",qe,[(p(!0),f(P,null,q(x.value,c=>{var H;return p(),f("div",{key:c.id,class:"relative pl-6 border-l-2 border-surface-200 dark:border-surface-700 pb-6 last:pb-0"},[e[26]||(e[26]=a("div",{class:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-primary-500 border-4 border-white dark:border-surface-800"},null,-1)),a("div",Ze,[a("div",Qe,[a("span",Je,m((H=c.user)==null?void 0:H.name),1),a("span",Xe,m(U(c.date)),1)]),a("p",Ye,m(c.description),1),d(i(bt),{value:c.hours_worked+" hrs",severity:"info",class:"text-xs"},null,8,["value"])])])}),128)),x.value.length===0?(p(),f("div",ta,[...e[27]||(e[27]=[a("div",{class:"flex items-center gap-4"},[a("div",{class:"w-16 h-16 bg-surface-100 dark:bg-surface-700 rounded-full flex items-center justify-center mx-auto mb-4 text-surface-400"},[a("i",{class:"pi pi-clock text-2xl"})]),a("div",null,[a("p",{class:"text-surface-500 font-medium"},"No work logged yet"),a("p",{class:"text-surface-400 text-sm mt-1"},"Start tracking time for this file")])],-1)])])):C("",!0)]))]),_:1}),d(i(rt),{value:"1"},{default:g(()=>[a("div",ea,[e[28]||(e[28]=a("h3",{class:"text-lg font-semibold m-0"},"Documents",-1)),a("div",null,[d(i(_),{label:"Upload",icon:"pi pi-upload",size:"small",onClick:Bt,loading:E.value},null,8,["loading"]),a("input",{type:"file",ref_key:"fileInput",ref:ut,class:"hidden",onChange:Ct},null,544)])]),S.value||R.value?(p(),f("div",aa,[(p(),f(P,null,q(4,c=>a("div",{key:"skeleton-doc-"+c,class:"bg-surface-50 dark:bg-surface-900 p-4 rounded-xl"},[a("div",sa,[d(i(w),{shape:"square",size:"2.5rem",borderRadius:"0.5rem"}),a("div",na,[d(i(w),{width:"80%",height:"1rem"}),d(i(w),{width:"60%",height:"0.75rem"})])])])),64))])):(p(),f("div",ra,[(p(!0),f(P,null,q(T.value,c=>(p(),f("div",{key:c.id,class:"group bg-surface-50 dark:bg-surface-900 p-4 rounded-xl border border-transparent hover:border-primary-200 dark:hover:border-primary-800 transition-all"},[a("div",ia,[e[29]||(e[29]=a("div",{class:"w-10 h-10 rounded-lg bg-white dark:bg-surface-800 flex items-center justify-center text-primary-600 shadow-sm"},[a("i",{class:"pi pi-file text-xl"})],-1)),a("div",oa,[a("p",la,m(c.original_name),1),a("p",da,m(Dt(c.size))+" â€¢ "+m(U(c.created_at)),1)]),a("div",ua,[d(i(_),{icon:"pi pi-download",text:"",rounded:"",severity:"secondary",size:"small",onClick:H=>Nt(c),loading:J.value[c.id]},null,8,["onClick","loading"]),d(i(_),{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",size:"small",onClick:H=>Lt(c),loading:X.value[c.id]},null,8,["onClick","loading"])])])]))),128)),T.value.length===0?(p(),f("div",ca,[...e[30]||(e[30]=[a("div",{class:"flex flex-col items-center gap-3"},[a("div",{class:"w-16 h-16 bg-surface-100 dark:bg-surface-700 rounded-full flex items-center justify-center text-surface-400"},[a("i",{class:"pi pi-folder-open text-2xl"})]),a("div",null,[a("p",{class:"text-surface-500 font-medium"},"No documents uploaded"),a("p",{class:"text-surface-400 text-sm mt-1"},"Upload relevant files here")])],-1)])])):C("",!0)]))]),_:1})]),_:1})]),_:1})]),a("div",pa,[e[33]||(e[33]=a("h3",{class:"text-lg font-semibold mb-6 flex items-center gap-2"},[a("i",{class:"pi pi-align-left text-orange-500"}),k(" Notes ")],-1)),d(i(Zt),{value:tt.value,loading:V.value,stripedRows:"",showGridlines:!1,class:"p-datatable-sm mb-4"},{empty:g(()=>[...e[31]||(e[31]=[a("div",{class:"text-center p-4"},[a("i",{class:"pi pi-info-circle text-4xl text-surface-400 mb-4"}),a("h3",{class:"text-xl font-semibold text-surface-700 dark:text-surface-300 mb-2"},"No Notes Found"),a("p",{class:"text-surface-500 dark:text-surface-400"}," No notes have been added for this file yet. ")],-1)])]),default:g(()=>[d(i(at),{field:"reason",header:"Reason",style:{"min-width":"200px"}}),d(i(at),{field:"user.name",header:"User",style:{"min-width":"120px"}}),d(i(at),{field:"created_at",header:"Date",style:{"min-width":"120px"}},{body:g(c=>[k(m(U(c.data.created_at)),1)]),_:1})]),_:1},8,["value","loading"]),a("div",ba,[d(i(_),{label:"Add Note",icon:"pi pi-plus",onClick:Pt})]),d(i(ft),{visible:K.value,"onUpdate:visible":e[5]||(e[5]=c=>K.value=c),modal:"",header:"Add Note",style:{width:"32rem",padding:"2rem"},class:"add-note-dialog"},{footer:g(()=>[a("div",va,[d(i(_),{label:"Cancel",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=c=>K.value=!1),class:"px-4 py-2 text-base"}),d(i(_),{label:"Save",icon:"pi pi-check",onClick:At,loading:V.value,class:"px-4 py-2 text-base"},null,8,["loading"])])]),default:g(()=>[a("div",fa,[a("div",null,[e[32]||(e[32]=a("label",{for:"reason",class:"block text-base font-semibold mb-2 text-surface-900 dark:text-surface-100"},"Reason *",-1)),d(i(vt),{id:"reason",modelValue:W.value.reason,"onUpdate:modelValue":e[3]||(e[3]=c=>W.value.reason=c),rows:"6",class:"w-full rounded-lg border border-surface-200 focus:border-primary-500 transition-all",style:{"min-height":"120px"}},null,8,["modelValue"])])])]),_:1},8,["visible"])])]),a("div",ha,[a("div",ma,[e[44]||(e[44]=a("h3",{class:"text-lg font-semibold mb-6 flex items-center gap-2"},[a("i",{class:"pi pi-info-circle text-primary-500"}),k(" File Details ")],-1)),a("div",ga,[a("div",xa,[e[35]||(e[35]=a("div",{class:"w-8 h-8 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 flex-shrink-0"},[a("i",{class:"pi pi-user"})],-1)),a("div",null,[e[34]||(e[34]=a("label",{class:"text-xs font-medium text-surface-500 uppercase block mb-1"},"Assignee",-1)),a("p",ya,m(((y=l.value.assignee)==null?void 0:y.name)||"Unassigned"),1)])]),a("div",ka,[e[37]||(e[37]=a("div",{class:"w-8 h-8 rounded-full bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center text-orange-600 flex-shrink-0"},[a("i",{class:"pi pi-align-left"})],-1)),a("div",null,[e[36]||(e[36]=a("label",{class:"text-xs font-medium text-surface-500 uppercase block mb-1"},"Admin Notes",-1)),a("p",wa,m(l.value.notes||"No notes provided"),1)])]),a("div",$a,[e[39]||(e[39]=a("div",{class:"w-8 h-8 rounded-full bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center text-purple-600 flex-shrink-0"},[a("i",{class:"pi pi-calendar"})],-1)),a("div",null,[e[38]||(e[38]=a("label",{class:"text-xs font-medium text-surface-500 uppercase block mb-1"},"Est. Completion Date",-1)),a("p",Ta,m(l.value.estimated_completion_date||"Not set"),1)])]),a("div",_a,[e[41]||(e[41]=a("div",{class:"w-8 h-8 rounded-full bg-green-50 dark:bg-green-900/20 flex items-center justify-center text-green-600 flex-shrink-0"},[a("i",{class:"pi pi-calendar-plus"})],-1)),a("div",null,[e[40]||(e[40]=a("label",{class:"text-xs font-medium text-surface-500 uppercase block mb-1"},"Created On",-1)),a("p",Ba,m(U(l.value.created_at)),1)])]),a("div",Ca,[e[43]||(e[43]=a("div",{class:"w-8 h-8 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center text-red-600 flex-shrink-0"},[a("i",{class:"pi pi-chart-bar"})],-1)),a("div",null,[e[42]||(e[42]=a("label",{class:"text-xs font-medium text-surface-500 uppercase block mb-1"},"Turnover",-1)),a("p",La,m(l.value.turnover||"Not set"),1)])])])])])])])):C("",!0),d(i(ft),{visible:I.value,"onUpdate:visible":e[10]||(e[10]=c=>I.value=c),modal:"",header:"Log Work",style:{width:"30rem"}},{footer:g(()=>[d(i(_),{label:"Cancel",text:"",severity:"secondary",onClick:e[9]||(e[9]=c=>I.value=!1)}),d(i(_),{label:"Save",onClick:_t,loading:Y.value},null,8,["loading"])]),default:g(()=>[a("div",Na,[a("div",Sa,[e[45]||(e[45]=a("label",{for:"date",class:"text-sm font-medium"},"Date",-1)),d(i(Ht),{id:"date",type:"date",modelValue:L.value.date,"onUpdate:modelValue":e[6]||(e[6]=c=>L.value.date=c),class:"w-full"},null,8,["modelValue"])]),a("div",Da,[e[46]||(e[46]=a("label",{for:"hours",class:"text-sm font-medium"},"Hours",-1)),d(i(qt),{id:"hours",modelValue:L.value.hours_worked,"onUpdate:modelValue":e[7]||(e[7]=c=>L.value.hours_worked=c),min:.1,max:24,minFractionDigits:1,class:"w-full"},null,8,["modelValue"])]),a("div",Pa,[e[47]||(e[47]=a("label",{for:"desc",class:"text-sm font-medium"},"Description",-1)),d(i(vt),{id:"desc",modelValue:L.value.description,"onUpdate:modelValue":e[8]||(e[8]=c=>L.value.description=c),rows:"3",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["visible"])])],64)}}};export{Ha as default};
