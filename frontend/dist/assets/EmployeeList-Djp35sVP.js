import{u as x,r as m,F as C,o as E,b as _,f as l,d as t,w as n,g as e,h as b,i as A,l as V,j as f,q as F,v as N,A as S,m as w,s as d,n as B}from"./index-CSrMWdAq.js";import{s as L,a as p}from"./index-MuAhWHKq.js";import{s as M}from"./index-DHUl35ms.js";import{s as D,a as R}from"./index-BWv2no9g.js";import"./index-CAhpMCF-.js";import"./index-CbCO2FIF.js";import"./index-L9OCDMB-.js";const j={class:"space-y-6"},U={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-4"},q={class:"flex justify-between items-center"},G={class:"flex gap-2"},I={class:"flex gap-1"},O={class:"flex gap-2"},Y={__name:"EmployeeList",setup(T){const c=A(),v=x(),y=m([]),h=m(!0),u=m({global:{value:null,matchMode:C.CONTAINS}}),g=async()=>{try{const o=await b.get("/employees");y.value=o.data.filter(s=>{var r;return s.id!==((r=v.user)==null?void 0:r.id)})}catch(o){console.error("Error fetching employees:",o)}finally{h.value=!1}},$=async o=>{confirm(`Login as ${o.name}?`)&&await v.impersonate(o.id)&&c.push("/")},k=async o=>{if(confirm(`Are you sure you want to delete ${o.name}?`))try{await b.delete(`/employees/${o.id}`),await g()}catch(s){console.error("Error deleting employee:",s)}};return E(()=>{g()}),(o,s)=>{const r=V("tooltip");return f(),_("div",j,[l("div",U,[t(e(L),{filters:u.value,"onUpdate:filters":s[2]||(s[2]=a=>u.value=a),value:y.value,loading:h.value,paginator:"",rows:10,globalFilterFields:["name","email","roles.name"],tableStyle:"min-width: 50rem",stripedRows:"",showGridlines:!1,class:"p-datatable-sm"},{header:n(()=>[l("div",q,[s[3]||(s[3]=l("h3",{class:"text-lg font-semibold text-surface-900 dark:text-surface-0 m-0"},"All Employees",-1)),l("div",G,[t(e(D),{iconPosition:"left"},{default:n(()=>[t(e(R),{class:"pi pi-search"}),t(e(B),{modelValue:u.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=a=>u.value.global.value=a),placeholder:"Search employees..."},null,8,["modelValue"])]),_:1}),t(e(d),{label:"Add Employee",icon:"pi pi-plus",onClick:s[1]||(s[1]=a=>e(c).push("/employees/create"))})])])]),default:n(()=>[t(e(p),{field:"name",header:"Name",sortable:""}),t(e(p),{field:"email",header:"Email",sortable:""}),t(e(p),{header:"Roles"},{body:n(a=>[l("div",I,[(f(!0),_(F,null,N(a.data.roles,i=>(f(),S(e(M),{key:i.id,value:i.name,severity:"info"},null,8,["value"]))),128))])]),_:1}),t(e(p),{header:"Actions"},{body:n(a=>[l("div",O,[w(t(e(d),{icon:"pi pi-eye",text:"",rounded:"",severity:"secondary",onClick:i=>e(c).push(`/employees/${a.data.id}`)},null,8,["onClick"]),[[r,"View",void 0,{top:!0}]]),w(t(e(d),{icon:"pi pi-user",text:"",rounded:"",severity:"success",onClick:i=>$(a.data)},null,8,["onClick"]),[[r,"Login as"]]),t(e(d),{icon:"pi pi-pencil",text:"",rounded:"",severity:"info",onClick:i=>e(c).push(`/employees/${a.data.id}/edit`)},null,8,["onClick"]),t(e(d),{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",onClick:i=>k(a.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["filters","value","loading"])])])}}};export{Y as default};
