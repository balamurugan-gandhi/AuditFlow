import{i as $,r as m,F as C,k as E,c as _,a as l,b as t,l as n,f as e,g as b,h as A,m as V,o as f,q as B,x as F,B as N,w as k,s as c,n as S}from"./index-CERIRcW2.js";import{s as L,a as p}from"./index-XVpHQhPD.js";import{s as M}from"./index-CFQQnXSI.js";import{s as D,a as R}from"./index-U7OHyoop.js";import"./index-yWIa-DpI.js";import"./index-DBcSeseI.js";import"./index-CUPv0TyI.js";const U={class:"space-y-6"},j={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-4"},q={class:"flex justify-between items-center"},G={class:"flex gap-2"},I={class:"flex gap-1"},O={class:"flex gap-2"},Y={__name:"EmployeeList",setup(T){const d=A(),v=$(),y=m([]),h=m(!0),u=m({global:{value:null,matchMode:C.CONTAINS}}),g=async()=>{try{const o=await b.get("/employees");y.value=o.data.filter(s=>{var r;return s.id!==((r=v.user)==null?void 0:r.id)})}catch(o){console.error("Error fetching employees:",o)}finally{h.value=!1}},w=async o=>{confirm(`Login as ${o.name}?`)&&await v.impersonate(o.id)&&d.push("/")},x=async o=>{if(confirm(`Are you sure you want to delete ${o.name}?`))try{await b.delete(`/employees/${o.id}`),await g()}catch(s){console.error("Error deleting employee:",s)}};return E(()=>{g()}),(o,s)=>{const r=V("tooltip");return f(),_("div",U,[l("div",j,[t(e(L),{filters:u.value,"onUpdate:filters":s[2]||(s[2]=a=>u.value=a),value:y.value,loading:h.value,paginator:"",rows:10,globalFilterFields:["name","email","roles.name"],tableStyle:"min-width: 50rem",stripedRows:"",showGridlines:!1,class:"p-datatable-sm"},{header:n(()=>[l("div",q,[s[3]||(s[3]=l("h3",{class:"text-lg font-semibold text-surface-900 dark:text-surface-0 m-0"},"All Employees",-1)),l("div",G,[t(e(D),{iconPosition:"left"},{default:n(()=>[t(e(R),{class:"pi pi-search"}),t(e(S),{modelValue:u.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=a=>u.value.global.value=a),placeholder:"Search employees..."},null,8,["modelValue"])]),_:1}),t(e(c),{label:"Add Employee",icon:"pi pi-plus",onClick:s[1]||(s[1]=a=>e(d).push("/employees/create"))})])])]),default:n(()=>[t(e(p),{field:"name",header:"Name",sortable:""}),t(e(p),{field:"email",header:"Email",sortable:""}),t(e(p),{header:"Roles"},{body:n(a=>[l("div",I,[(f(!0),_(B,null,F(a.data.roles,i=>(f(),N(e(M),{key:i.id,value:i.name,severity:"info"},null,8,["value"]))),128))])]),_:1}),t(e(p),{header:"Actions"},{body:n(a=>[l("div",O,[k(t(e(c),{icon:"pi pi-eye",text:"",rounded:"",severity:"secondary",onClick:i=>e(d).push(`/employees/${a.data.id}`)},null,8,["onClick"]),[[r,"View",void 0,{top:!0}]]),k(t(e(c),{icon:"pi pi-user",text:"",rounded:"",severity:"success",onClick:i=>w(a.data)},null,8,["onClick"]),[[r,"Login as"]]),t(e(c),{icon:"pi pi-pencil",text:"",rounded:"",severity:"info",onClick:i=>e(d).push(`/employees/${a.data.id}/edit`)},null,8,["onClick"]),t(e(c),{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",onClick:i=>x(a.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["filters","value","loading"])])])}}};export{Y as default};
