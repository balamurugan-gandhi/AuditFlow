import{r as b,k as h,g as c,c as y,a as o,e as _,b as l,l as d,f as n,h as w,o as u,z as v,A as C,B as k,d as V,s as $}from"./index-CERIRcW2.js";import{s as B,a as r}from"./index-XVpHQhPD.js";import{s as z}from"./index-C7FIN1Lj.js";import"./index-U7OHyoop.js";import"./index-CUPv0TyI.js";import"./index-yWIa-DpI.js";import"./index-DBcSeseI.js";const N={class:"max-w-4xl mx-auto py-8"},R={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6"},I={__name:"Plugins",setup(S){const p=w(),i=b([]);h(m);async function m(){try{const t=await c.get("/plugins");i.value=t.data.map(e=>({...e,enabled:!!e.enabled,icon:e.icon||"pi pi-cog",iconColor:e.icon_color||"",settingsRoute:e.name==="whatsapp-meta"?"/plugins/whatsapp-meta":""}))}catch(t){console.error("Failed to load plugins",t)}}function g(t){p.push(t)}async function f(t){try{const a=(await c.put(`/plugins/${t.id}`,{enabled:t.enabled})).data,s=i.value.findIndex(x=>x.id===a.id);s!==-1&&(i.value[s].enabled=a.enabled)}catch(e){console.error("Failed to update plugin",e)}}return(t,e)=>(u(),y("div",N,[e[1]||(e[1]=o("h2",{class:"text-2xl font-bold mb-6 flex items-center gap-2"},[o("i",{class:"pi pi-plug text-primary-500 text-2xl"}),_(" Plugins ")],-1)),o("div",R,[e[0]||(e[0]=o("p",{class:"mb-4 text-surface-700 dark:text-surface-300"},"Manage and configure plugins for your application here.",-1)),l(n(B),{value:i.value,class:"p-datatable-sm",showGridlines:!1},{default:d(()=>[l(n(r),{field:"icon",header:"",style:{width:"60px"}},{body:d(a=>[o("i",{class:C(a.data.icon+" text-2xl"),style:v(a.data.iconColor?"color:"+a.data.iconColor:"")},null,6)]),_:1}),l(n(r),{field:"name",header:"Plugin"}),l(n(r),{field:"enabled",header:"Enabled",style:{width:"120px"}},{body:d(a=>[l(n(z),{modelValue:a.data.enabled,"onUpdate:modelValue":s=>a.data.enabled=s,onChange:s=>f(a.data)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(n(r),{header:"Settings",style:{width:"120px"}},{body:d(a=>[a.data.settingsRoute?(u(),k(n($),{key:0,icon:"pi pi-cog",label:"Settings",size:"small",onClick:s=>g(a.data.settingsRoute)},null,8,["onClick"])):V("",!0)]),_:1})]),_:1},8,["value"])])]))}};export{I as default};
