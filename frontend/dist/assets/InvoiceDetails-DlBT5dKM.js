import{r as x,k as B,c as i,d as m,b as d,f as o,a as t,t as a,l as p,s as A,h as F,g as v,p as R,o as u,e as C}from"./index-CERIRcW2.js";import{s as S}from"./index-CFQQnXSI.js";import{s as D}from"./index-CQSetL0I.js";import{s as T,a as _}from"./index-XVpHQhPD.js";import"./index-U7OHyoop.js";import"./index-CUPv0TyI.js";import"./index-yWIa-DpI.js";import"./index-DBcSeseI.js";const V={class:"max-w-4xl mx-auto space-y-6"},M={key:0,class:"space-y-6"},U={key:1,class:"space-y-6"},L={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6"},H={class:"flex justify-between items-start mb-6"},O={class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},q={class:"text-surface-600 dark:text-surface-400 mt-1"},z={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},G={class:"text-lg font-semibold text-surface-900 dark:text-surface-0"},J={class:"text-lg font-semibold text-surface-900 dark:text-surface-0"},K={class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},Q={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"text-surface-900 dark:text-surface-0"},Y={class:"text-surface-900 dark:text-surface-0"},Z={class:"text-surface-900 dark:text-surface-0"},tt={class:"text-surface-900 dark:text-surface-0"},et={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6"},st={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},at={class:"text-surface-900 dark:text-surface-0"},rt={class:"text-surface-900 dark:text-surface-0"},ot={class:"text-surface-900 dark:text-surface-0"},dt={class:"text-surface-900 dark:text-surface-0"},nt={class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6"},lt={class:"space-y-3"},ct={class:"flex justify-between"},it={class:"text-surface-900 dark:text-surface-0 font-medium"},ut={class:"flex justify-between"},ft={class:"text-surface-900 dark:text-surface-0 font-medium"},xt={class:"border-t border-surface-200 dark:border-surface-700 pt-3 flex justify-between"},mt={class:"text-lg font-bold text-surface-900 dark:text-surface-0"},pt={key:0,class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6"},vt={class:"text-surface-700 dark:text-surface-300"},_t={key:1,class:"card bg-white dark:bg-surface-800 rounded-xl shadow-sm p-6"},bt={class:"flex justify-end gap-3"},It={__name:"InvoiceDetails",setup(gt){const b=F(),g=R(),s=x(null),k=x(!0),l=x({}),I=async()=>{try{const r=await v.get(`/invoices/${g.params.id}`);s.value=r.data}catch(r){console.error("Error fetching invoice:",r),b.push("/billing")}finally{k.value=!1}},P=async()=>{try{const r=await v.get("/settings");l.value=r.data}catch(r){console.error("Error fetching company settings:",r)}},$=r=>{switch(r){case"paid":return"success";case"partial":return"warning";case"overdue":return"danger";default:return"secondary"}},c=r=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r),E=r=>r.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()),j=async()=>{try{const r=await v.get(`/invoices/${g.params.id}/download-pdf`,{responseType:"blob"}),e=window.URL.createObjectURL(new Blob([r.data])),n=document.createElement("a");n.href=e,n.setAttribute("download",`invoice-${s.value.invoice_number}.pdf`),document.body.appendChild(n),n.click(),n.remove()}catch(r){console.error("Error downloading PDF:",r)}};return B(()=>{I(),P()}),(r,e)=>{var n,y,h,w,N;return u(),i("div",V,[k.value?(u(),i("div",M,[d(o(D),{width:"100%",height:"200px"}),d(o(D),{width:"100%",height:"300px"})])):s.value?(u(),i("div",U,[t("div",L,[t("div",H,[t("div",null,[t("h2",O,"Invoice "+a(s.value.invoice_number),1),t("p",q,a((n=s.value.client)==null?void 0:n.business_name),1)]),d(o(S),{value:s.value.status,severity:$(s.value.status),class:"text-lg px-4 py-2"},null,8,["value","severity"])]),t("div",z,[t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Invoice Date",-1)),t("p",G,a(s.value.invoice_date),1)]),t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Due Date",-1)),t("p",J,a(s.value.due_date),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Auditor Fee",-1)),t("p",K,a(c(s.value.auditor_fee)),1)])])]),t("div",Q,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold text-surface-900 dark:text-surface-0 mb-4"},"From",-1)),t("div",W,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Company Name",-1)),t("p",X,a(l.value.company_name||"N/A"),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Email",-1)),t("p",Y,a(l.value.company_email||"N/A"),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Phone",-1)),t("p",Z,a(l.value.company_phone||"N/A"),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Address",-1)),t("p",tt,a(l.value.company_address||"N/A"),1)])])]),t("div",et,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-surface-900 dark:text-surface-0 mb-4"},"Client Information",-1)),t("div",st,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Business Name",-1)),t("p",at,a((y=s.value.client)==null?void 0:y.business_name),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Contact Person",-1)),t("p",rt,a(((h=s.value.client)==null?void 0:h.contact_person)||"N/A"),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Email",-1)),t("p",ot,a(((w=s.value.client)==null?void 0:w.email)||"N/A"),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm text-surface-600 dark:text-surface-400"},"Phone",-1)),t("p",dt,a(((N=s.value.client)==null?void 0:N.phone)||"N/A"),1)])])]),t("div",nt,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-surface-900 dark:text-surface-0 mb-4"},"Amount Details",-1)),t("div",lt,[t("div",ct,[e[14]||(e[14]=t("span",{class:"text-surface-600 dark:text-surface-400"},"Total Tax Amount",-1)),t("span",it,a(c(s.value.total_tax_amount||0)),1)]),t("div",ut,[e[15]||(e[15]=t("span",{class:"text-surface-600 dark:text-surface-400"},"Auditor Fee",-1)),t("span",ft,a(c(s.value.auditor_fee||0)),1)]),t("div",xt,[e[16]||(e[16]=t("span",{class:"text-lg font-semibold text-surface-900 dark:text-surface-0"},"Total",-1)),t("span",mt,a(c(s.value.auditor_fee||0)),1)])])]),s.value.notes?(u(),i("div",pt,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-surface-900 dark:text-surface-0 mb-4"},"Notes",-1)),t("p",vt,a(s.value.notes),1)])):m("",!0),s.value.payments&&s.value.payments.length>0?(u(),i("div",_t,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-surface-900 dark:text-surface-0 mb-4"},"Payment History",-1)),d(o(T),{value:s.value.payments,class:"p-datatable-sm"},{default:p(()=>[d(o(_),{field:"payment_date",header:"Date"}),d(o(_),{field:"payment_method",header:"Method"},{body:p(f=>[C(a(E(f.data.payment_method)),1)]),_:1}),d(o(_),{field:"amount",header:"Amount"},{body:p(f=>[C(a(c(f.data.amount)),1)]),_:1})]),_:1},8,["value"])])):m("",!0),t("div",bt,[d(o(A),{label:"Download PDF",icon:"pi pi-download",onClick:j}),d(o(A),{label:"Back",severity:"secondary",onClick:e[0]||(e[0]=f=>o(b).back())})])])):m("",!0)])}}};export{It as default};
